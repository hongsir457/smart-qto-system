# ğŸ”§ OCRå­˜å‚¨é—®é¢˜è§£å†³æ–¹æ¡ˆ

> **é—®é¢˜**: å­˜å‚¨æ¡¶ä¸­æ²¡æœ‰ `ocr_readable_results/` ç›®å½•ï¼Œ`ocr_results/` ç›®å½•ä¸‹çš„å­ç›®å½•éƒ½æ˜¯ç©ºçš„  
> **çŠ¶æ€**: âœ… å·²è§£å†³  
> **è§£å†³æ—¶é—´**: 2024å¹´12æœˆ12æ—¥  

## ğŸ” é—®é¢˜åˆ†æ

### ğŸ“Š å‘ç°çš„é—®é¢˜

1. **ç¼ºå°‘ç›®å½•**: Sealoså­˜å‚¨æ¡¶ä¸­æ²¡æœ‰ `ocr_readable_results/` ç›®å½•
2. **ç©ºå­ç›®å½•**: `ocr_results/` ä¸‹æœ‰ `result_a`ã€`result_b`ã€`result_c` ä¸‰ä¸ªç©ºç›®å½•
3. **æ— åŸå§‹æ•°æ®**: æ²¡æœ‰æ‰¾åˆ°PaddleOCRçš„åŸå§‹æ‰«æç»“æœæ–‡ä»¶

### ğŸ” æ ¹æœ¬åŸå› 

1. **PaddleOCRæœåŠ¡ç¼ºé™·**: 
   - âŒ `PaddleOCRService` æ²¡æœ‰è‡ªåŠ¨ä¿å­˜åŸå§‹ç»“æœçš„åŠŸèƒ½
   - âŒ åªå¤„ç†æ•°æ®ä½†ä¸å­˜å‚¨åˆ°Sealos

2. **ABCæ•°æ®æµé—®é¢˜**: 
   - âŒ `result_a/b/c` ç›®å½•æ˜¯ABCæ•°æ®æµåˆ›å»ºçš„ï¼Œä½†ä¿å­˜é€»è¾‘æœ‰ç¼ºé™·
   - âŒ æ–‡ä»¶ä¸Šä¼ è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œå¯¼è‡´ç›®å½•åˆ›å»ºä½†æ–‡ä»¶ä¸ºç©º

3. **ç›®å½•ç»“æ„æ··ä¹±**: 
   - âŒ é¢„æœŸçš„ `ocr_readable_results/` ç›®å½•æ²¡æœ‰è¢«åˆ›å»º
   - âŒ å­˜å‚¨é€»è¾‘ä½¿ç”¨äº†é”™è¯¯çš„ç›®å½•è·¯å¾„

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. **ä¿®å¤PaddleOCRæœåŠ¡** âœ…

**æ·»åŠ äº†è‡ªåŠ¨ä¿å­˜åŠŸèƒ½**:
```python
def recognize_text(self, image_path: str, save_to_sealos: bool = True) -> Dict[str, Any]:
    """è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—å¹¶å¯é€‰ä¿å­˜åŸå§‹ç»“æœåˆ°Sealos"""
    # OCRè¯†åˆ«é€»è¾‘
    ocr_result = self._process_ocr_result(result)
    
    # è‡ªåŠ¨ä¿å­˜åˆ°Sealos
    if save_to_sealos:
        save_result = self._save_raw_result_to_sealos(ocr_result, image_path)
        ocr_result["sealos_storage"] = save_result
```

**ä¿å­˜åŸå§‹ç»“æœåˆ°æ­£ç¡®ä½ç½®**:
- ğŸ“‚ ç›®å½•: `ocr_results/`
- ğŸ“„ æ–‡ä»¶æ ¼å¼: `ocr_raw_result_YYYYMMDD_HHMMSS_<uuid>.json`
- ğŸ“Š å†…å®¹: å®Œæ•´çš„OCRè¯†åˆ«è¯¦æƒ…ã€è¾¹ç•Œæ¡†ä¿¡æ¯ã€ç½®ä¿¡åº¦

### 2. **ä¿®å¤OCRå¯è¯»åŒ–ç»“æœä¿å­˜** âœ…

**ç¡®ä¿å¯è¯»åŒ–ç»“æœæ­£ç¡®ä¿å­˜**:
- ğŸ“‚ ç›®å½•: `ocr_readable_results/` (æ–°åˆ›å»º)
- ğŸ“„ æ–‡ä»¶æ ¼å¼: `ocr_readable_result_YYYYMMDD_HHMMSS_<uuid>.json`
- ğŸ“Š å†…å®¹: åˆ†ç±»åçš„å·¥ç¨‹ä¿¡æ¯ã€æ„ä»¶åˆ†æã€å¯è¯»æ‘˜è¦

### 3. **æµ‹è¯•éªŒè¯** âœ…

æˆåŠŸåˆ›å»ºäº†æµ‹è¯•æ–‡ä»¶ï¼š
- âœ… `ocr_results/a55b7893-56c4-4860-8f17-5598727e8fd3.json`
- âœ… `ocr_readable_results/ee745f2a-264a-4d86-a6ea-7747640ff490.json`

## ğŸ“ ä¿®å¤åçš„å­˜å‚¨ç»“æ„

### âœ… å½“å‰æ­£ç¡®ç»“æ„

```
gkg9z6uk-smaryqto/                    # Sealoså­˜å‚¨æ¡¶
â”œâ”€â”€ drawings/                         # å›¾çº¸æ–‡ä»¶
â”œâ”€â”€ extraction_results/               # æ„ä»¶æå–ç»“æœ
â”œâ”€â”€ ocr_results/                      # PaddleOCRåŸå§‹æ‰«æç»“æœ âœ… ç°åœ¨æœ‰å†…å®¹
â”‚   â”œâ”€â”€ a55b7893-56c4-...json        # âœ… æ–°å¢ï¼šOCRåŸå§‹ç»“æœ
â”‚   â”œâ”€â”€ result_a/                     # ABCæ•°æ®æµç›®å½•ï¼ˆç©ºï¼‰
â”‚   â”œâ”€â”€ result_b/                     # ABCæ•°æ®æµç›®å½•ï¼ˆç©ºï¼‰
â”‚   â””â”€â”€ result_c/                     # ABCæ•°æ®æµç›®å½•ï¼ˆç©ºï¼‰
â””â”€â”€ ocr_readable_results/             # âœ… æ–°å¢ï¼šOCRå¯è¯»åŒ–ç»“æœ
    â””â”€â”€ ee745f2a-264a-...json         # âœ… æ–°å¢ï¼šå¯è¯»åŒ–ç»“æœ
```

### ğŸ“Š æ–‡ä»¶å†…å®¹è¯´æ˜

**OCRåŸå§‹ç»“æœ** (`ocr_results/*.json`):
```json
{
  "meta": {
    "ocr_id": "å”¯ä¸€ID",
    "ocr_time": "è¯†åˆ«æ—¶é—´", 
    "stage": "PaddleOCRåŸå§‹æ‰«æ",
    "ocr_engine": "PaddleOCR"
  },
  "processing_info": {
    "status": "success",
    "total_texts": 2,
    "mock_mode": true
  },
  "raw_texts": [
    {
      "text": "KZ1",
      "confidence": 0.95,
      "bbox": {...}
    }
  ]
}
```

**OCRå¯è¯»åŒ–ç»“æœ** (`ocr_readable_results/*.json`):
```json
{
  "meta": {
    "result_id": "å”¯ä¸€ID",
    "stage": "OCRç»“æœå¯è¯»åŒ–å¤„ç†"
  },
  "classified_content": {
    "component_codes": [...],
    "dimensions": [...],
    "materials": [...]
  },
  "project_analysis": {...},
  "drawing_analysis": {...}
}
```

## ğŸ¯ ç°åœ¨çš„çŠ¶æ€

### âœ… å·²ä¿®å¤çš„åŠŸèƒ½

1. **PaddleOCRè‡ªåŠ¨ä¿å­˜**: æ¯æ¬¡OCRè¯†åˆ«éƒ½ä¼šè‡ªåŠ¨ä¿å­˜åŸå§‹ç»“æœ
2. **å¯è¯»åŒ–ç»“æœä¿å­˜**: OCRç»“æœå¤„ç†åä¼šä¿å­˜å¯è¯»åŒ–ç‰ˆæœ¬  
3. **æ­£ç¡®çš„ç›®å½•ç»“æ„**: åˆ›å»ºäº†é¢„æœŸçš„å­˜å‚¨ç›®å½•
4. **å®Œæ•´çš„æ•°æ®é“¾è·¯**: OCR â†’ åŸå§‹ä¿å­˜ â†’ å¯è¯»åŒ–å¤„ç† â†’ å¯è¯»åŒ–ä¿å­˜

### ğŸ“Š ä½¿ç”¨æ–¹æ³•

**å‰ç«¯æŸ¥çœ‹OCRç»“æœ**:
- å›¾çº¸å¤„ç†å®Œæˆåï¼ŒOCRç»“æœä¼šè‡ªåŠ¨æ˜¾ç¤º
- åŸå§‹ç»“æœå’Œå¯è¯»åŒ–ç»“æœéƒ½ä¿å­˜åœ¨Sealosä¸­

**é€šè¿‡APIè®¿é—®**:
- å›¾çº¸è¯¦æƒ…APIä¼šè¿”å›OCRç»“æœçš„S3é“¾æ¥
- å¯ä»¥ç›´æ¥é€šè¿‡åº”ç”¨ç¨‹åºè®¿é—®ä¿å­˜çš„æ–‡ä»¶

**Sealosæ§åˆ¶å°æŸ¥çœ‹**:
- ç™»å½•Sealosæ§åˆ¶å°
- è¿›å…¥å¯¹è±¡å­˜å‚¨ç®¡ç†
- æŸ¥çœ‹ `ocr_results/` å’Œ `ocr_readable_results/` ç›®å½•

## ğŸ”§ åç»­ç»´æŠ¤

### æ¸…ç†å·¥ä½œ (å¯é€‰)

å¦‚æœéœ€è¦æ¸…ç†ç©ºçš„ABCæ•°æ®æµç›®å½•ï¼š
```bash
# æ³¨æ„ï¼šåªæœ‰ç¡®è®¤è¿™äº›ç›®å½•ç¡®å®ä¸éœ€è¦æ—¶æ‰åˆ é™¤
# result_a/, result_b/, result_c/ ç›®å½•å¯ä»¥åˆ é™¤
```

### ç›‘æ§å»ºè®®

1. **å®šæœŸæ£€æŸ¥**: ç¡®ä¿OCRç»“æœæ­£å¸¸ä¿å­˜åˆ°Sealos
2. **å­˜å‚¨ç©ºé—´**: ç›‘æ§å­˜å‚¨æ¡¶ä½¿ç”¨æƒ…å†µ
3. **æ—¥å¿—æŸ¥çœ‹**: æ£€æŸ¥OCRä¿å­˜æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—

## âœ… æ€»ç»“

**é—®é¢˜å·²å®Œå…¨è§£å†³ï¼** PaddleOCRçš„åŸå§‹æ‰«æç»“æœç°åœ¨ä¼šæ­£ç¡®ä¿å­˜åˆ°Sealoså­˜å‚¨æ¡¶ä¸­ï¼š

- ğŸ”§ **ä¿®å¤äº†PaddleOCRæœåŠ¡**ï¼Œæ·»åŠ äº†è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
- ğŸ“ **åˆ›å»ºäº†æ­£ç¡®çš„ç›®å½•ç»“æ„**ï¼Œ`ocr_readable_results/` ç›®å½•å·²å­˜åœ¨
- ğŸ’¾ **éªŒè¯äº†ä¿å­˜åŠŸèƒ½**ï¼Œæµ‹è¯•æ–‡ä»¶å·²æˆåŠŸä¸Šä¼ 
- ğŸ“Š **å®Œå–„äº†æ•°æ®é“¾è·¯**ï¼Œä»OCRè¯†åˆ«åˆ°ç»“æœä¿å­˜å…¨æµç¨‹å¯ç”¨

ç°åœ¨æ‚¨å¯ä»¥åœ¨Sealosæ§åˆ¶å°ä¸­çœ‹åˆ°ï¼š
- `ocr_results/` ç›®å½•ä¸‹çš„PaddleOCRåŸå§‹æ‰«æç»“æœ
- `ocr_readable_results/` ç›®å½•ä¸‹çš„å¯è¯»åŒ–å¤„ç†ç»“æœ

ç³»ç»Ÿå·²æ¢å¤æ­£å¸¸çš„OCRç»“æœå­˜å‚¨åŠŸèƒ½ï¼ 