# ğŸ›¡ï¸ æ™ºèƒ½åˆ‡ç‰‡Visionåˆ†æé™çº§å¤„ç†ç­–ç•¥è¯¦è§£

## ğŸ“‹ æ¦‚è¿°

é™çº§å¤„ç†ç­–ç•¥æ˜¯æ™ºèƒ½åˆ‡ç‰‡Visionåˆ†ææ¨¡å—çš„æ ¸å¿ƒå®‰å…¨æœºåˆ¶ï¼Œç¡®ä¿åœ¨å„ç§å¼‚å¸¸æƒ…å†µä¸‹éƒ½èƒ½æä¾›å¯ç”¨çš„åˆ†æç»“æœã€‚è¯¥ç­–ç•¥é‡‡ç”¨**6çº§é™çº§æœºåˆ¶**ï¼Œä»æœ€ä¼˜çš„æ™ºèƒ½åˆ‡ç‰‡åˆ†æé€æ­¥é™çº§åˆ°åŸºç¡€ä¿¡æ¯æå–ï¼Œä¿è¯ç³»ç»Ÿçš„å¥å£®æ€§å’Œå¯ç”¨æ€§ã€‚

## ğŸ¯ è®¾è®¡åŸåˆ™

### æ ¸å¿ƒç†å¿µ
- **æ°¸ä¸æ”¾å¼ƒ**ï¼šç¡®ä¿æ¯ä¸ªåˆ†æè¯·æ±‚éƒ½æœ‰ç»“æœè¿”å›
- **é€çº§é™çº§**ï¼šä»é«˜ç²¾åº¦é€æ­¥é™çº§åˆ°åŸºç¡€åŠŸèƒ½
- **æ™ºèƒ½é‡è¯•**ï¼šæ ¹æ®é”™è¯¯ç±»å‹é€‰æ‹©åˆé€‚çš„é‡è¯•ç­–ç•¥
- **ç”¨æˆ·é€æ˜**ï¼šæ¸…æ™°å‘ŠçŸ¥ç”¨æˆ·å½“å‰ä½¿ç”¨çš„å¤„ç†çº§åˆ«

### è´¨é‡ä¿è¯
- **ç»“æœéªŒè¯**ï¼šæ¯çº§éƒ½æœ‰è´¨é‡éªŒè¯æœºåˆ¶
- **è¶…æ—¶æ§åˆ¶**ï¼šé˜²æ­¢æ— é™ç­‰å¾…
- **èµ„æºä¿æŠ¤**ï¼šé¿å…èµ„æºè€—å°½
- **é”™è¯¯éš”ç¦»**ï¼šé˜²æ­¢é”™è¯¯ä¼ æ’­

## ğŸ—ï¸ 6çº§é™çº§æ¶æ„

```
Level 0: æ™ºèƒ½åˆ‡ç‰‡åˆ†æ (æœ€ä¼˜)
    â†“ (å¤±è´¥/è¶…æ—¶)
Level 1: ä¼˜åŒ–é‡è¯•åˆ‡ç‰‡åˆ†æ
    â†“ (å¤±è´¥/è¶…æ—¶)
Level 2: ç›´æ¥Visionåˆ†æ
    â†“ (å¤±è´¥/è¶…æ—¶)
Level 3: PaddleOCRæ–‡å­—è¯†åˆ«
    â†“ (å¤±è´¥/è¶…æ—¶)
Level 4: åŸºç¡€å›¾åƒä¿¡æ¯
    â†“ (å¤±è´¥/è¶…æ—¶)
Level 5: é”™è¯¯æŠ¥å‘Š (æœ€ç»ˆå…œåº•)
```

## ğŸ“Š è¯¦ç»†çº§åˆ«è¯´æ˜

### Level 0: æ™ºèƒ½åˆ‡ç‰‡åˆ†æ (æ­£å¸¸æ¨¡å¼)
**ç›®æ ‡**ï¼šä½¿ç”¨å®Œæ•´çš„æ™ºèƒ½åˆ‡ç‰‡åŠŸèƒ½è¿›è¡Œé«˜ç²¾åº¦åˆ†æ

**å¤„ç†æµç¨‹**ï¼š
1. å›¾åƒæ™ºèƒ½åˆ‡ç‰‡ï¼ˆ2048Ã—2048ï¼Œ10%é‡å ï¼‰
2. å¹¶è¡ŒVision APIè°ƒç”¨
3. ç»“æœæ™ºèƒ½åˆå¹¶å»é‡
4. äº‘ç«¯å­˜å‚¨ä¿å­˜

**è¶…æ—¶è®¾ç½®**ï¼š300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰

**æˆåŠŸæ¡ä»¶**ï¼š
- åˆ‡ç‰‡æˆåŠŸç‡ â‰¥ 80%
- è¯†åˆ«æ„ä»¶æ•°é‡ > 0
- å¹³å‡ç½®ä¿¡åº¦ â‰¥ 0.8

**å¤±è´¥åŸå› **ï¼š
- OpenAI APIé™æµ/é”™è¯¯
- ç½‘ç»œè¶…æ—¶
- åˆ‡ç‰‡å¤„ç†å¤±è´¥
- ç»“æœè´¨é‡ä¸è¾¾æ ‡

```python
# Level 0 ç¤ºä¾‹ç»“æœ
{
    "task_id": "vision_slice_001",
    "analysis_type": "vision_slicing_with_fallback",
    "fallback_info": {
        "level": "normal",
        "success": True,
        "processing_time": 45.2,
        "fallback_reason": ""
    },
    "data": {
        "slicing_info": {
            "total_slices": 6,
            "successful_slices": 6,
            "success_rate": 1.0
        },
        "processing_summary": {
            "total_components": 24,
            "avg_confidence": 0.92
        }
    }
}
```

### Level 1: ä¼˜åŒ–é‡è¯•åˆ‡ç‰‡åˆ†æ
**ç›®æ ‡**ï¼šé€šè¿‡ä¼˜åŒ–å‚æ•°æé«˜æˆåŠŸç‡

**ä¼˜åŒ–ç­–ç•¥**ï¼š
- é™ä½åˆ‡ç‰‡åˆ†è¾¨ç‡ï¼š2048 â†’ 1024
- å‡å°‘é‡å åŒºåŸŸï¼š10% â†’ 5%
- é™ä½å›¾åƒè´¨é‡ï¼š95% â†’ 90%
- é™åˆ¶æœ€å¤§åˆ‡ç‰‡æ•°ï¼šæ— é™åˆ¶ â†’ 6ä¸ª

**é‡è¯•æœºåˆ¶**ï¼š
- æœ€å¤§é‡è¯•æ¬¡æ•°ï¼š3æ¬¡
- é€’å¢å»¶è¿Ÿï¼š2s, 5s, 10s
- æŒ‡æ•°é€€é¿ç­–ç•¥

**è¶…æ—¶è®¾ç½®**ï¼š180ç§’ï¼ˆ3åˆ†é’Ÿï¼‰

**æˆåŠŸæ¡ä»¶**ï¼š
- åˆ‡ç‰‡æˆåŠŸç‡ â‰¥ 50%ï¼ˆé™ä½è¦æ±‚ï¼‰
- è¯†åˆ«æ„ä»¶æ•°é‡ > 0

```python
# Level 1 ç¤ºä¾‹ç»“æœ
{
    "fallback_info": {
        "level": "retry_slicing",
        "success": True,
        "processing_time": 28.7,
        "fallback_reason": "retry_with_optimization"
    },
    "data": {
        "slicing_info": {
            "total_slices": 4,
            "successful_slices": 3,
            "success_rate": 0.75
        },
        "optimization_applied": {
            "resolution_reduced": True,
            "overlap_reduced": True,
            "quality_reduced": True
        }
    }
}
```

### Level 2: ç›´æ¥Visionåˆ†æ
**ç›®æ ‡**ï¼šè·³è¿‡åˆ‡ç‰‡ï¼Œç›´æ¥ä½¿ç”¨OpenAI Vision API

**å¤„ç†æ–¹å¼**ï¼š
- å›¾åƒè‡ªåŠ¨å‹ç¼©åˆ°2048Ã—2048
- å•æ¬¡APIè°ƒç”¨
- æ¥å—OpenAIçš„è‡ªåŠ¨å‹ç¼©

**è¶…æ—¶è®¾ç½®**ï¼š60ç§’ï¼ˆ1åˆ†é’Ÿï¼‰

**ä¼˜åŠ¿**ï¼š
- å¤„ç†é€Ÿåº¦å¿«
- èµ„æºæ¶ˆè€—å°‘
- å®ç°ç®€å•

**åŠ£åŠ¿**ï¼š
- å¤§å›¾åƒä¼šå¤±çœŸ
- ç»†èŠ‚å¯èƒ½ä¸¢å¤±

```python
# Level 2 ç¤ºä¾‹ç»“æœ
{
    "fallback_info": {
        "level": "direct_analysis",
        "success": True,
        "processing_time": 8.3,
        "fallback_reason": "fallback_to_direct_analysis"
    },
    "data": {
        "analysis_type": "vision_direct",
        "compression_applied": True,
        "final_resolution": [1456, 2048],
        "analysis_result": {
            "components": [...],
            "confidence_score": 0.78
        }
    }
}
```

### Level 3: PaddleOCRæ–‡å­—è¯†åˆ«
**ç›®æ ‡**ï¼šä½¿ç”¨æœ¬åœ°OCRè¿›è¡ŒåŸºç¡€æ–‡å­—è¯†åˆ«

**å¤„ç†èƒ½åŠ›**ï¼š
- æ–‡å­—è¯†åˆ«å’Œå®šä½
- åŸºç¡€æ„ä»¶å…³é”®è¯æ£€æµ‹
- å›¾çº¸æ ‡æ³¨æå–

**è¶…æ—¶è®¾ç½®**ï¼š30ç§’

**è½¬æ¢é€»è¾‘**ï¼š
- OCRæ–‡å­— â†’ æ„ä»¶å…³é”®è¯åŒ¹é…
- æ–‡å­—ä½ç½® â†’ æ„ä»¶è¾¹ç•Œæ¡†
- ç½®ä¿¡åº¦ â†’ è¯†åˆ«å¯ä¿¡åº¦

**å…³é”®è¯æ˜ å°„**ï¼š
```python
component_keywords = {
    'æŸ±': 'column',
    'æ¢': 'beam', 
    'æ¿': 'slab',
    'å¢™': 'wall',
    'åŸºç¡€': 'foundation',
    'æ¥¼æ¢¯': 'stair'
}
```

```python
# Level 3 ç¤ºä¾‹ç»“æœ
{
    "fallback_info": {
        "level": "simple_ocr",
        "success": True,
        "processing_time": 12.1,
        "fallback_reason": "fallback_to_ocr_only"
    },
    "data": {
        "analysis_type": "ocr_fallback",
        "texts": [
            {"text": "C1æŸ±", "bbox": [100, 200, 150, 220], "confidence": 0.95},
            {"text": "ä¸»æ¢", "bbox": [300, 150, 350, 170], "confidence": 0.88}
        ],
        "components": [
            {"id": "ocr_comp_0", "type": "column", "name": "C1æŸ±"},
            {"id": "ocr_comp_1", "type": "beam", "name": "ä¸»æ¢"}
        ],
        "statistics": {
            "total_texts": 15,
            "total_components": 8,
            "confidence_avg": 0.87
        }
    }
}
```

### Level 4: åŸºç¡€å›¾åƒä¿¡æ¯
**ç›®æ ‡**ï¼šæå–å›¾åƒçš„åŸºç¡€æŠ€æœ¯ä¿¡æ¯

**æå–å†…å®¹**ï¼š
- æ–‡ä»¶ä¿¡æ¯ï¼šå¤§å°ã€æ ¼å¼ã€åç§°
- å›¾åƒå±æ€§ï¼šåˆ†è¾¨ç‡ã€DPIã€è‰²å½©æ¨¡å¼
- åˆ†æå»ºè®®ï¼šæ¨èå¤„ç†æ–¹æ³•

**å¤„ç†æ—¶é—´**ï¼š< 1ç§’

**é€‚ç”¨åœºæ™¯**ï¼š
- æ‰€æœ‰AIåˆ†æéƒ½å¤±è´¥
- å›¾åƒæ–‡ä»¶æŸå
- ç½‘ç»œå®Œå…¨ä¸å¯ç”¨

```python
# Level 4 ç¤ºä¾‹ç»“æœ
{
    "fallback_info": {
        "level": "basic_info",
        "success": True,
        "processing_time": 0.3,
        "fallback_reason": "fallback_to_basic_info"
    },
    "data": {
        "task_type": "basic_image_info",
        "file_info": {
            "name": "drawing.png",
            "size_mb": 7.3,
            "size_bytes": 7651328
        },
        "image_properties": {
            "width": 3000,
            "height": 4000,
            "dpi": [300, 300],
            "total_pixels": 12000000
        },
        "analysis_info": {
            "suitable_for_slicing": True,
            "estimated_slice_count": 6,
            "recommended_method": "slicing"
        }
    }
}
```

### Level 5: é”™è¯¯æŠ¥å‘Š (æœ€ç»ˆå…œåº•)
**ç›®æ ‡**ï¼šç”Ÿæˆè¯¦ç»†çš„é”™è¯¯æŠ¥å‘Šå’Œå»ºè®®

**æŠ¥å‘Šå†…å®¹**ï¼š
- å°è¯•çš„æ‰€æœ‰å¤„ç†çº§åˆ«
- å¤±è´¥åŸå› åˆ†æ
- é—®é¢˜æ’æŸ¥å»ºè®®
- æŠ€æœ¯æ”¯æŒè”ç³»æ–¹å¼

**æ°¸ä¸å¤±è´¥**ï¼šè¿™æ˜¯æœ€åä¸€çº§ï¼Œä¿è¯æœ‰ç»“æœè¿”å›

```python
# Level 5 ç¤ºä¾‹ç»“æœ
{
    "fallback_info": {
        "level": "error_report",
        "success": False,
        "processing_time": 0.1,
        "fallback_reason": "complete_failure"
    },
    "data": {
        "task_id": "vision_slice_001",
        "status": "completely_failed",
        "error_summary": "æ‰€æœ‰å¤„ç†çº§åˆ«éƒ½å¤±è´¥äº†",
        "attempted_levels": [
            "intelligent_slicing",
            "retry_slicing", 
            "direct_analysis",
            "simple_ocr",
            "basic_info"
        ],
        "recommendations": [
            "æ£€æŸ¥å›¾åƒæ–‡ä»¶æ˜¯å¦æŸå",
            "éªŒè¯OpenAI APIå¯†é’¥æƒé™",
            "ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸",
            "å°è¯•å‡å°å›¾åƒå°ºå¯¸",
            "è”ç³»æŠ€æœ¯æ”¯æŒ"
        ]
    }
}
```

## âš™ï¸ é…ç½®å‚æ•°

### è¶…æ—¶è®¾ç½®
```python
timeout_thresholds = {
    FallbackLevel.LEVEL_0: 300,  # 5åˆ†é’Ÿ - æ™ºèƒ½åˆ‡ç‰‡
    FallbackLevel.LEVEL_1: 180,  # 3åˆ†é’Ÿ - é‡è¯•åˆ‡ç‰‡
    FallbackLevel.LEVEL_2: 60,   # 1åˆ†é’Ÿ - ç›´æ¥åˆ†æ
    FallbackLevel.LEVEL_3: 30,   # 30ç§’ - OCRè¯†åˆ«
}
```

### é‡è¯•é…ç½®
```python
max_retries = 3
retry_delays = [2, 5, 10]  # é€’å¢å»¶è¿Ÿï¼ˆç§’ï¼‰
```

### è´¨é‡é˜ˆå€¼
```python
# Level 0 æˆåŠŸæ¡ä»¶
min_success_rate = 0.8      # æœ€å°æˆåŠŸç‡
min_components = 1          # æœ€å°æ„ä»¶æ•°

# Level 1 æˆåŠŸæ¡ä»¶  
min_success_rate = 0.5      # é™ä½æˆåŠŸç‡è¦æ±‚
min_components = 1          # ä¿æŒæ„ä»¶æ•°è¦æ±‚
```

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### APIè°ƒç”¨
```python
from app.services.openai_vision_slicer import OpenAIVisionSlicer

# åˆå§‹åŒ–åˆ†æå™¨
vision_slicer = OpenAIVisionSlicer()

# æ‰§è¡Œå¸¦é™çº§ç­–ç•¥çš„åˆ†æ
result = await vision_slicer.analyze_image_with_slicing(
    image_path="large_drawing.png",
    task_id="task_001",
    analysis_prompt="åˆ†æå»ºç­‘ç»“æ„å›¾çº¸"
)

# æ£€æŸ¥é™çº§çº§åˆ«
fallback_level = result['fallback_info']['level']
success = result['fallback_info']['success']

print(f"åˆ†æçº§åˆ«: {fallback_level}")
print(f"æ˜¯å¦æˆåŠŸ: {success}")

if success:
    if fallback_level == "normal":
        print("âœ… å®Œç¾ï¼ä½¿ç”¨äº†æœ€é«˜ç²¾åº¦çš„æ™ºèƒ½åˆ‡ç‰‡åˆ†æ")
    elif fallback_level == "retry_slicing":
        print("âš ï¸ ä¼˜åŒ–é‡è¯•æˆåŠŸï¼Œç»“æœå¯é ")
    elif fallback_level == "direct_analysis":
        print("âš ï¸ é™çº§åˆ°ç›´æ¥åˆ†æï¼Œå¯èƒ½æœ‰ç²¾åº¦æŸå¤±")
    elif fallback_level == "simple_ocr":
        print("âš ï¸ ä»…æä¾›OCRæ–‡å­—è¯†åˆ«ç»“æœ")
    elif fallback_level == "basic_info":
        print("âš ï¸ ä»…æä¾›åŸºç¡€å›¾åƒä¿¡æ¯")
else:
    print("âŒ æ‰€æœ‰åˆ†ææ–¹æ³•éƒ½å¤±è´¥äº†")
    print("å»ºè®®:", result['data']['recommendations'])
```

### é”™è¯¯å¤„ç†
```python
async def robust_analysis(image_path, task_id):
    """å¥å£®çš„å›¾åƒåˆ†æå‡½æ•°"""
    try:
        result = await vision_slicer.analyze_image_with_slicing(
            image_path, task_id
        )
        
        # æ ¹æ®é™çº§çº§åˆ«å¤„ç†ç»“æœ
        level = result['fallback_info']['level']
        
        if level in ['normal', 'retry_slicing']:
            # é«˜è´¨é‡ç»“æœï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨
            return process_high_quality_result(result)
        elif level == 'direct_analysis':
            # ä¸­ç­‰è´¨é‡ï¼Œéœ€è¦ç”¨æˆ·ç¡®è®¤
            return process_medium_quality_result(result)
        elif level in ['simple_ocr', 'basic_info']:
            # ä½è´¨é‡ï¼Œæä¾›æœ‰é™åŠŸèƒ½
            return process_low_quality_result(result)
        else:
            # å®Œå…¨å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            return handle_complete_failure(result)
            
    except Exception as e:
        # è¿™ç§æƒ…å†µç†è®ºä¸Šä¸åº”è¯¥å‘ç”Ÿ
        logger.error(f"é™çº§ç­–ç•¥æœ¬èº«å¤±è´¥: {e}")
        return create_emergency_fallback(image_path, task_id, str(e))
```

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### å…³é”®æŒ‡æ ‡
```python
# é™çº§åˆ†å¸ƒç»Ÿè®¡
fallback_distribution = {
    "level_0": 0.75,  # 75% æ­£å¸¸å¤„ç†
    "level_1": 0.15,  # 15% ä¼˜åŒ–é‡è¯•
    "level_2": 0.08,  # 8% ç›´æ¥åˆ†æ
    "level_3": 0.02,  # 2% OCRé™çº§
    "level_4": 0.00,  # 0% åŸºç¡€ä¿¡æ¯
    "level_5": 0.00   # 0% å®Œå…¨å¤±è´¥
}

# å¤„ç†æ—¶é—´å¯¹æ¯”
processing_times = {
    "level_0": "45.2s",   # æ™ºèƒ½åˆ‡ç‰‡
    "level_1": "28.7s",   # ä¼˜åŒ–é‡è¯•
    "level_2": "8.3s",    # ç›´æ¥åˆ†æ
    "level_3": "12.1s",   # OCRè¯†åˆ«
    "level_4": "0.3s",    # åŸºç¡€ä¿¡æ¯
}
```

### å‘Šè­¦è§„åˆ™
- Level 2+ é™çº§ç‡ > 30% â†’ æ£€æŸ¥OpenAI APIçŠ¶æ€
- Level 3+ é™çº§ç‡ > 10% â†’ æ£€æŸ¥ç½‘ç»œè¿æ¥
- Level 5 å‡ºç°ä»»ä½•å®ä¾‹ â†’ ç«‹å³äººå·¥ä»‹å…¥

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é™çº§åŸå› 
1. **Level 0 â†’ Level 1**: OpenAI APIé™æµã€ç½‘ç»œæŠ–åŠ¨
2. **Level 1 â†’ Level 2**: å›¾åƒè¿‡å¤§ã€åˆ‡ç‰‡æ•°é‡è¿‡å¤š
3. **Level 2 â†’ Level 3**: OpenAI APIå®Œå…¨ä¸å¯ç”¨
4. **Level 3 â†’ Level 4**: PaddleOCRæœåŠ¡å¼‚å¸¸
5. **Level 4 â†’ Level 5**: å›¾åƒæ–‡ä»¶æŸå

### ä¼˜åŒ–å»ºè®®
1. **ç›‘æ§APIé…é¢**ï¼šé¿å…è¶…å‡ºOpenAIé™åˆ¶
2. **ç½‘ç»œä¼˜åŒ–**ï¼šä½¿ç”¨CDNåŠ é€ŸAPIè°ƒç”¨
3. **æœ¬åœ°ç¼“å­˜**ï¼šç¼“å­˜æˆåŠŸçš„åˆ†æç»“æœ
4. **é¢„å¤„ç†ä¼˜åŒ–**ï¼šæå‰è¿‡æ»¤æ— æ•ˆå›¾åƒ
5. **è´Ÿè½½å‡è¡¡**ï¼šåˆ†æ•£APIè°ƒç”¨å‹åŠ›

## ğŸ¯ æœ€ä½³å®è·µ

### 1. åˆç†è®¾ç½®è¶…æ—¶
```python
# æ ¹æ®å›¾åƒå¤§å°åŠ¨æ€è°ƒæ•´è¶…æ—¶
def calculate_timeout(image_size):
    width, height = image_size
    pixels = width * height
    
    if pixels > 10_000_000:  # è¶…å¤§å›¾
        return 600  # 10åˆ†é’Ÿ
    elif pixels > 4_000_000:  # å¤§å›¾
        return 300  # 5åˆ†é’Ÿ
    else:  # æ™®é€šå›¾
        return 180  # 3åˆ†é’Ÿ
```

### 2. æ™ºèƒ½é™çº§å†³ç­–
```python
def should_skip_level(level, error_type, retry_count):
    """æ™ºèƒ½è·³çº§å†³ç­–"""
    
    # APIæƒé™é”™è¯¯ç›´æ¥è·³åˆ°OCR
    if "invalid_request_error" in str(error_type):
        return level.value in ["normal", "retry_slicing", "direct_analysis"]
    
    # ç½‘ç»œé”™è¯¯é‡è¯•æœ‰æ„ä¹‰
    if "timeout" in str(error_type) and retry_count < 2:
        return False
    
    # å›¾åƒæ ¼å¼é”™è¯¯ç›´æ¥åˆ°åŸºç¡€ä¿¡æ¯
    if "image_format" in str(error_type):
        return level.value in ["normal", "retry_slicing", "direct_analysis", "simple_ocr"]
    
    return False
```

### 3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
```python
def get_user_friendly_message(fallback_level, success):
    """ç”¨æˆ·å‹å¥½çš„æ¶ˆæ¯æç¤º"""
    
    messages = {
        "normal": "âœ… åˆ†æå®Œæˆï¼ä½¿ç”¨äº†æœ€é«˜ç²¾åº¦çš„æ™ºèƒ½åˆ‡ç‰‡æŠ€æœ¯",
        "retry_slicing": "âœ… åˆ†æå®Œæˆï¼ç»è¿‡ä¼˜åŒ–é‡è¯•è·å¾—å¯é ç»“æœ", 
        "direct_analysis": "âš ï¸ åˆ†æå®Œæˆï¼ç”±äºå›¾åƒè¾ƒå¤§ï¼Œä½¿ç”¨äº†å‹ç¼©åˆ†æ",
        "simple_ocr": "âš ï¸ æä¾›æ–‡å­—è¯†åˆ«ç»“æœï¼ŒAIåˆ†ææš‚æ—¶ä¸å¯ç”¨",
        "basic_info": "â„¹ï¸ ä»…æä¾›å›¾åƒåŸºç¡€ä¿¡æ¯ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§",
        "error_report": "âŒ åˆ†æå¤±è´¥ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒ"
    }
    
    return messages.get(fallback_level, "æœªçŸ¥çŠ¶æ€")
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

**é™çº§ç­–ç•¥ç›¸å…³é—®é¢˜**ï¼š
- ğŸ“§ Email: fallback-support@smart-qto.com
- ğŸ“± æŠ€æœ¯çƒ­çº¿: 400-123-4567
- ğŸ”§ åœ¨çº¿è¯Šæ–­: https://diagnosis.smart-qto.com
- ğŸ“– è¯¦ç»†æ–‡æ¡£: https://docs.smart-qto.com/fallback

---

*æ™ºèƒ½é™çº§ç­–ç•¥ - è®©ç³»ç»Ÿæ°¸è¿œå¯ç”¨ï¼Œè®©ç”¨æˆ·æ°¸è¿œæ»¡æ„* ğŸ›¡ï¸ 